###########################
# Trade Events
###########################

add_namespace = trade

country_event = { #re-evaluate trade relationship
	id = trade.1
	title = trade.1.title
	desc = trade.1.desc
	trigger = {	
		any_country = {
			has_opinion = { target = PREV value < -10 }
			NOT = {
				has_opinion_modifier = embargo
				has_opinion_modifier = sanctions
				has_opinion_modifier = minor_sanctions
			}
			NOT = {
				tag = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			random_country = {
				limit = { 
					has_opinion = { target = PREV value < -10 } 
					NOT = { tag = ROOT }
					NOT = {
						has_opinion_modifier = embargo
						has_opinion_modifier = sanctions
						has_opinion_modifier = minor_sanctions
					}
				}
				save_event_target_as = trade_target
			}
		}
	}

	option = {
		name = trade.1.minorsanctions
		ROOT = {
			add_opinion_modifier = { target = event_target:trade_target modifier = minor_sanctions }
			add_opinion_modifier = { target = event_target:trade_target modifier = relation_minor_sanctions }	
		}
		hidden_effect = {
			event_target:trade_target = {
				country_event = { id = trade.2 }
			}
		}
	}

	option = {
		name = trade.1.sanctions
		ROOT = {
			add_opinion_modifier = { target = event_target:trade_target modifier = sanctions }
		}
		add_opinion_modifier = { target = ROOT modifier = relation_sanctions }
		hidden_effect = {
			event_target:trade_target = {
				country_event = { id = trade.3 }
			}
		}
	}

	option = {
		name = trade.1.embargo
		ROOT = {
			add_opinion_modifier = { target = event_target:trade_target modifier = embargo }	
		}
		add_opinion_modifier = { target = ROOT modifier = relation_embargo }
		hidden_effect = {
			event_target:trade_target = {
				country_event = { id = trade.4 }
			}
		}
	}

	option = {
		name = trade.1.squo
	}
}

country_event = { #from has put light sanctions on us
	id = trade.2
	title = trade.2.title
	desc = trade.2.desc
	is_triggered_only = yes

	option = {
		name = trade.2.a
		custom_effect_tooltip = trade.minorsanctions
	}
}

country_event = { #from has sanctioned us
	id = trade.3
	title = trade.3.title
	desc = trade.3.desc
	is_triggered_only = yes

	option = {
		name = trade.2.a
		custom_effect_tooltip = trade.sanctions
	}
}

country_event = { #from has embargoed us !!!
	id = trade.4
	title = trade.4.title
	desc = trade.4.desc
	is_triggered_only = yes

	option = {
		name = trade.2.a
		custom_effect_tooltip = trade.embargo
	}
}

country_event = { #re-evaluate trade relationship, take off sanctions
	id = trade.5
	title = trade.5.title
	desc = trade.5.desc
	trigger = {	
		any_country = {
			has_opinion = { target = PREV value > 10 }
			OR = {
				has_opinion_modifier = embargo
				has_opinion_modifier = sanctions
				has_opinion_modifier = minor_sanctions
			}
			NOT = {
				tag = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			random_country = {
				limit = { 
					has_opinion = { target = PREV value > 10 } 
					NOT = { tag = ROOT }
					OR = {
						has_opinion_modifier = embargo
						has_opinion_modifier = sanctions
						has_opinion_modifier = minor_sanctions
					}
				}
				save_event_target_as = trade_target
			}
		}
	}

	option = {
		name = trade.5.minorsanctions
		trigger = { event_target:trade_target = { has_opinion_modifier = minor_sanctions } }
		ROOT = {
			remove_opinion_modifier = { target = event_target:trade_target modifier = minor_sanctions }
			remove_opinion_modifier = { target = event_target:trade_target modifier = relation_minor_sanctions }
			add_opinion_modifier = { target = event_target:trade_target modifier = relation_lifted_minor_sanctions }
		}
		hidden_effect = {
			event_target:trade_target = {
				country_event = { id = trade.6 }
			}
		}
	}

	option = {
		name = trade.5.sanctions
		trigger = { event_target:trade_target = { has_opinion_modifier = sanctions } }
		ROOT = {
			remove_opinion_modifier = { target = event_target:trade_target modifier = minor_sanctions }
			remove_opinion_modifier = { target = event_target:trade_target modifier = relation_sanctions }
			add_opinion_modifier = { target = event_target:trade_target modifier = relation_lifted_sanctions }
		}
		hidden_effect = {
			event_target:trade_target = {
				country_event = { id = trade.7 }
			}
		}
	}

	option = {
		name = trade.5.embargo
		trigger = { event_target:trade_target = { has_opinion_modifier = embargo } }
		ROOT = {
			remove_opinion_modifier = { target = event_target:trade_target modifier = embargo }
			remove_opinion_modifier = { target = event_target:trade_target modifier = relation_embargo }
			add_opinion_modifier = { target = event_target:trade_target modifier = relation_lifted_embargo }
		}
		hidden_effect = {
			event_target:trade_target = {
				country_event = { id = trade.8 }
			}
		}
	}

	option = {
		name = trade.1.squo
	}
}

country_event = { #from has lifted light sanctions
	id = trade.6
	title = trade.6.title
	desc = trade.6.desc
	is_triggered_only = yes

	option = {
		name = trade.6.a	
	}
}

country_event = { #from has lifted sanctions
	id = trade.7
	title = trade.7.title
	desc = trade.7.desc
	is_triggered_only = yes

	option = {
		name = trade.7.a	
	}
}

country_event = { #from has lifted the embargo
	id = trade.4
	title = trade.4.title
	desc = trade.4.desc
	is_triggered_only = yes

	option = {
		name = trade.2.a	
	}
}